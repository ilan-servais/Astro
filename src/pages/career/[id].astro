---
import { redirect } from 'astro/server';
import timelineData from '../../data/timeline.json';

const { id } = Astro.params;
const numericId = parseInt(id);

// Vérifier si l'ID existe dans les données
const experienceExists = timelineData.experiences.some(exp => exp.id === numericId);

// Si l'ID n'existe pas, rediriger vers la page career générale
if (!experienceExists) {
  return redirect('/career');
}

// Correction du chemin pour assurer que la redirection fonctionne sur le domaine racine
return redirect(`${import.meta.env.BASE_URL || '/'}career#${id}`);
---
