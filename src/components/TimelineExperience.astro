---
import { Image } from 'astro:assets';
import project1Image from '@assets/images/project-1.svg';
import project2Image from '@assets/images/project-2.svg';
import project3Image from '@assets/images/project-3.svg';

interface Props {
  id: number;
  year: number;
  company: string;
  title: string;
  description: string;
  iconPath: string;
}

const { id, year, company, title, description, iconPath } = Astro.props;

// Déterminer quelle image utiliser
const getImage = (path) => {
  if (path.includes('project-1')) return project1Image;
  if (path.includes('project-2')) return project2Image;
  if (path.includes('project-3')) return project3Image;
  return project1Image; // Image par défaut
};

const image = getImage(iconPath);
---

<div class="timeline-experience bg-white dark:bg-darkBg rounded-xl overflow-hidden shadow-xl">
  <div class="flex flex-col md:flex-row">
    <div class="relative bg-gray-100 dark:bg-gray-800 p-4 md:w-1/3">
      <Image 
        src={image} 
        alt={`${company} illustration`} 
        width={400}
        height={300}
        class="w-full h-auto object-contain max-h-[200px]"
      />
      <div class="absolute top-2 right-2 bg-orange text-white text-xs font-bold px-2 py-1 rounded-full">
        {year}
      </div>
      <!-- Bouton de partage sur mobile -->
      <button 
        class="share-button absolute bottom-2 right-2 bg-black dark:bg-white text-white dark:text-black p-1.5 rounded-full md:hidden" 
        data-id={id}
        aria-label="Partager cette expérience"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="18" cy="5" r="3"></circle>
          <circle cx="6" cy="12" r="3"></circle>
          <circle cx="18" cy="19" r="3"></circle>
          <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
          <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
        </svg>
      </button>
    </div>
    
    <div class="p-5 md:w-2/3 relative">
      <h3 class="text-xl font-bold text-orange mb-2">{company}</h3>
      <h4 class="text-lg font-medium text-black dark:text-white mb-3">{title}</h4>
      <p class="text-sm text-gray-700 dark:text-gray-300">{description}</p>
      
      <!-- Bouton de partage sur desktop -->
      <button 
        class="share-button absolute top-2 right-2 bg-black dark:bg-white text-white dark:text-black p-1.5 rounded-full hidden md:block opacity-0 group-hover:opacity-100 transition-opacity" 
        data-id={id}
        aria-label="Partager cette expérience"
      >
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="18" cy="5" r="3"></circle>
          <circle cx="6" cy="12" r="3"></circle>
          <circle cx="18" cy="19" r="3"></circle>
          <line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line>
          <line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line>
        </svg>
      </button>
    </div>
  </div>
</div>

<style>
  .timeline-experience {
    transform-origin: center left;
    transition: all 0.3s ease;
  }
  
  .timeline-experience:hover {
    transform: translateX(5px) scale(1.01);
    box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }

  .share-button {
    transition: all 0.2s ease;
  }

  .share-button:hover {
    background-color: #E06330;
    transform: scale(1.1);
  }
</style>
